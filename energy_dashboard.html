<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁØÄËÉΩÁúãÊùø - Think Power</title>
    <link rel="stylesheet" href="css/energy_dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Ê®ôÈ°åÊ¨Ñ -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon" onclick="goToSettings()">
                <img src="thinkpower.ico" alt="Think Power" class="logo-image">
                <span class="text">Think<br>Power</span>
            </div>
        </div>
        <div class="station-name">
            <h1>Work Station Name</h1>
        </div>
        <div class="datetime">
            <div class="date" id="currentDate">yyyy/mm/dd</div>
            <div class="time" id="currentTime">HH:MM:SS</div>
        </div>
    </header>

    <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄÂüü -->
    <main class="main-content">
        <!-- Â§ßÂç°ÁâáÂçÄÂüü -->
        <section class="big-cards">
            <div class="big-card cost-savings">
                <div class="card-header">
                    <h3>Cost Savings</h3>
                    <span class="trend-icon">‚ñ≤</span>
                    </div>
                <div class="card-value">
                    <span class="value">88,900</span>
                    <span class="unit">NT$</span>
                </div>
            </div>
            
            <div class="big-card carbon-reduction">
                <div class="card-header">
                    <h3>Carbon Reduction</h3>
                    <span class="trend-icon">‚ñ≤</span>
                </div>
                <div class="card-value">
                    <span class="value">5,620.09</span>
                    <span class="unit">kg CO2e/kWh</span>
                        </div>
                    </div>

            <div class="big-card reverse-power">
                <div class="card-header">
                    <h3>Reverse Active Power</h3>
                    <span class="trend-icon">‚ñ≤</span>
                        </div>
                <div class="card-value">
                    <span class="value">15,620.5</span>
                    <span class="unit">kW</span>
                </div>
            </div>
        </section>

        <!-- Â∞èÂç°ÁâáÂçÄÂüü -->
        <section class="small-cards">
            <div class="small-card">
                <div class="card-label">Voltage</div>
                <div class="card-value">220.5 <span class="unit">V</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">Current</div>
                <div class="card-value">20.12 <span class="unit">A</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">Frequency</div>
                <div class="card-value">60.0 <span class="unit">Hz</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">PF</div>
                <div class="card-value">0.998</div>
            </div>
            <div class="small-card">
                <div class="card-label">THD_V</div>
                <div class="card-value">99.9 <span class="unit">%</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">THD_A</div>
                <div class="card-value">1.9 <span class="unit">%</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">Daily Energy Usage</div>
                <div class="card-value">9,999 <span class="unit">kW</span></div>
            </div>
            <div class="small-card">
                <div class="card-label">Daily Energy</div>
                <div class="card-value">8,888 <span class="unit">kW</span></div>
                        </div>
        </section>

        <!-- ÂúñË°®ÂçÄÂüü -->
        <section class="charts-container">
            <!-- ‰∏äÂçäÈÉ®ÂúñË°® -->
            <div class="charts-top">
                <div class="chart-card daily-usage">
                    <div class="chart-header">
                        <h4>‚óè Daily Energy Usage</h4>
                    </div>
                    <div class="chart-content">
                        <canvas id="dailyUsageChart" width="400" height="200"></canvas>
                    </div>
                </div>
                
                <div class="chart-card daily-reclaimed">
                    <div class="chart-header">
                        <h4>‚óè Daily Energy Reclaimed</h4>
                    </div>
                    <div class="chart-content">
                        <canvas id="dailyReclaimedChart" width="400" height="200"></canvas>
                </div>
            </div>
            
                <div class="chart-card trees-equivalent">
                    <div class="chart-header">
                        <h4>‚óè Trees Planted Equivalent</h4>
                    </div>
                    <div class="trees-content">
                        <div class="trees-number">9,999</div>
                        <div class="trees-visual">
                            <div class="trees-row">
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                    </div>
                            <div class="trees-row">
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                                <span class="tree">üå≥</span>
                    </div>
                </div>
                        <div class="multiplier-scale">
                            <div class="scale-item active">
                                <div class="scale-dot"></div>
                                <span>x1</span>
            </div>
                            <div class="scale-item">
                                <div class="scale-dot"></div>
                                <span>x10</span>
        </div>
                            <div class="scale-item">
                                <div class="scale-dot"></div>
                                <span>x100</span>
                </div>
                            <div class="scale-item">
                                <div class="scale-dot"></div>
                                <span>x1000</span>
            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‰∏ãÂçäÈÉ®Â§ßÂúñË°® -->
            <div class="charts-bottom">
                <div class="chart-card large-chart energy-usage">
                    <div class="chart-header">
                        <h4>‚óè Energy Usage</h4>
            </div>
                    <div class="chart-content">
                        <canvas id="energyUsageChart" width="800" height="300"></canvas>
                </div>
            </div>
            
                <div class="chart-card large-chart energy-reclaimed">
                    <div class="chart-header">
                        <h4>‚óè Energy Reclaimed</h4>
                    </div>
                    <div class="chart-content">
                        <canvas id="energyReclaimedChart" width="800" height="300"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Ë®≠ÂÆöÂΩàÁ™ó -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>‚öôÔ∏è Ë®≠ÂÆöÈ†ÅÈù¢</h2>
                <span class="close-btn" onclick="closeSettingsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="workStationName">Work Station Name</label>
                    <input type="text" id="workStationName" value="Work Station Name" placeholder="Ë´ãËº∏ÂÖ•Â∑•‰ΩúÁ´ôÂêçÁ®±">
                </div>

                <div class="setting-group">
                    <label for="voltageLogTime">ÈõªÂ£ìlogÁ¥ÄÈåÑÊôÇÈñì</label>
                    <select id="voltageLogTime">
                        <option value="1">1 Áßí</option>
                        <option value="5" selected>5 Áßí</option>
                        <option value="10">10 Áßí</option>
                        <option value="30">30 Áßí</option>
                        <option value="60">1 ÂàÜÈêò</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-save" onclick="saveSettings()">ÂÑ≤Â≠òË®≠ÂÆö</button>
                <button class="btn-cancel" onclick="closeSettingsModal()">ÂèñÊ∂à</button>
                
                <!-- Â∑•Á®ãÊ®°ÂºèÊåâÈàï (È†êË®≠Èö±Ëóè) -->
                <button id="engineeringModeBtn" class="btn-engineering" onclick="openEngineeringModal()" style="display: none;">
                    üîß Â∑•Á®ãÊ®°Âºè
                </button>
            </div>
        </div>
    </div>

    <!-- Â∑•Á®ãÊ®°ÂºèÂΩàÁ™ó -->
    <div id="engineeringModal" class="modal" style="display: none;">
        <div class="modal-content engineering-modal">
            <div class="modal-header">
                <h2>üîß Â∑•Á®ãÊ®°Âºè</h2>
                <span class="close-btn" onclick="closeEngineeringModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- ÈõªË°®ÊôÇÈñìÊ†°Ê≠£ÂçÄÂüü -->
                <div class="engineering-section">
                    <h3>ÈõªË°®ÊôÇÈñìÊ†°Ê≠£</h3>
                    <div class="time-sync-group">
                        <div class="time-display">
                            <label>Á≥ªÁµ±ÊôÇÈñìÔºö</label>
                            <span id="systemTime" class="time-value">ËºâÂÖ•‰∏≠...</span>
                        </div>
                        <div class="time-display">
                            <label>ÈõªË°®ÊôÇÈñìÔºö</label>
                            <span id="meterTime" class="time-value">ËºâÂÖ•‰∏≠...</span>
                        </div>
                        <div class="time-actions">
                            <button class="btn-sync" onclick="syncMeterTime()">ÂêåÊ≠•ÈõªË°®ÊôÇÈñì</button>
                            <button class="btn-refresh" onclick="refreshMeterTime()">ÈáçÊñ∞ËÆÄÂèñ</button>
                        </div>
                    </div>
                </div>

                <!-- ÈõªË°®IPÁ∏ΩË¶ΩÂçÄÂüü -->
                <div class="engineering-section">
                    <h3>ÈõªË°®IPÁ∏ΩË¶Ω</h3>
                    
                    <div class="ip-overview-group">
                        <div class="ip-section">
                            <h4>ËÄóËÉΩÈõªË°®IP</h4>
                            <div class="ip-config">
                                <div class="ip-input-group">
                                    <label for="consumptionMeterIP">IPÂú∞ÂùÄÔºö</label>
                                    <input type="text" id="consumptionMeterIP" value="192.168.1.9" placeholder="192.168.1.9">
                                </div>
                                <div class="ip-input-group">
                                    <label for="consumptionMeterPort">Âü†ËôüÔºö</label>
                                    <input type="number" id="consumptionMeterPort" value="502" placeholder="502">
                                </div>
                                <div class="ip-input-group">
                                    <label for="consumptionMeterID">Ë®≠ÂÇôIDÔºö</label>
                                    <input type="number" id="consumptionMeterID" value="2" placeholder="2">
                                </div>
                                <div class="connection-status">
                                    <span class="status-label">ÈÄ£Êé•ÁãÄÊÖãÔºö</span>
                                    <span id="consumptionStatus" class="status-indicator offline">Èõ¢Á∑ö</span>
                                    <button class="btn-test" onclick="testConnection('consumption')">Ê∏¨Ë©¶ÈÄ£Êé•</button>
                                </div>
                            </div>
                        </div>

                        <div class="ip-section">
                            <h4>ÂõûÊî∂ÈõªË°®IP</h4>
                            <div class="ip-config">
                                <div class="ip-input-group">
                                    <label for="recoveryMeterIP">IPÂú∞ÂùÄÔºö</label>
                                    <input type="text" id="recoveryMeterIP" value="192.168.1.10" placeholder="192.168.1.10">
                                </div>
                                <div class="ip-input-group">
                                    <label for="recoveryMeterPort">Âü†ËôüÔºö</label>
                                    <input type="number" id="recoveryMeterPort" value="502" placeholder="502">
                                </div>
                                <div class="ip-input-group">
                                    <label for="recoveryMeterID">Ë®≠ÂÇôIDÔºö</label>
                                    <input type="number" id="recoveryMeterID" value="3" placeholder="3">
                                </div>
                                <div class="connection-status">
                                    <span class="status-label">ÈÄ£Êé•ÁãÄÊÖãÔºö</span>
                                    <span id="recoveryStatus" class="status-indicator offline">Èõ¢Á∑ö</span>
                                    <button class="btn-test" onclick="testConnection('recovery')">Ê∏¨Ë©¶ÈÄ£Êé•</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-save" onclick="saveEngineeringSettings()">ÂÑ≤Â≠òË®≠ÂÆö</button>
                <button class="btn-cancel" onclick="closeEngineeringModal()">ÈóúÈñâ</button>
            </div>
        </div>
    </div>

    <script src="js/dashboard.js"></script>
    <script src="js/modal-controller.js"></script>
</body>
</html> 